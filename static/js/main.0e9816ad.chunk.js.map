{"version":3,"sources":["bean.svg","components/twemoji.js","components/header.js","components/map.js","components/table.js","App.js","index.js"],"names":["module","exports","memo","emoji","dangerouslySetInnerHTML","__html","twemoji","parse","folder","ext","useStyles","makeStyles","theme","root","flexGrow","title","Header","classes","id","AppBar","position","Toolbar","Typography","variant","className","Button","size","onClick","window","open","myIcon","L","Icon","iconUrl","require","iconSize","Point","CoffeeMap","props","state","dataMaps","Map","style","height","width","zoom","maxZoom","center","attributionControl","TileLayer","url","attribution","AttributionControl","prefix","spiderfyDistanceMultiplier","showCoverageOnHover","maxClusterRadius","this","dataMapsProp","filter","x","Coordinates","map","dataItem","k","City","mapCoords","Roaster","URL","Marker","icon","key","Tooltip","direction","offset","opacity","href","Component","CoffeeTable","TableContainer","component","Paper","Table","stickyHeader","aria-label","TableHead","TableRow","TableCell","align","TableBody","row","scope","target","rel","doc","GoogleSpreadsheet","provider","BingProvider","params","process","App","self","a","useServiceAccountAuth","client_email","private_key","loadInfo","sheet","sheetsByIndex","getRows","rows","forEach","JSON","setState","needsUpdates","length","index","city","search","query","providerResult","latlon","y","stringify","save","console","log","Grid","container","spacing","item","xs","sm","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0e9816ad.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bean.5c039dac.svg\";","import React, { memo } from 'react'\nimport twemoji from 'twemoji'\n\n// Using the official https://github.com/twitter/twemoji from Twitter\n// With an excellent example from https://gist.github.com/chibicode/fe195d792270910226c928b69a468206\n\nconst Twemoji = ({ emoji }) => (\n    <span\n        dangerouslySetInnerHTML={{\n            __html: twemoji.parse(emoji, {\n                folder: 'svg',\n                ext: '.svg'\n            })\n        }}\n    />\n)\n\nexport default memo(Twemoji)","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Twemoji from './twemoji';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n    },\n    title: {\n        flexGrow: 1,\n    },\n}));\n\nfunction Header() {\n\n    const classes = useStyles();\n    return (\n        <div id=\"header\">\n            <AppBar position=\"static\">\n                <Toolbar>\n                    <Typography variant=\"h6\" className={classes.title}>\n                        <Twemoji emoji=\"â˜•\" /> Bay Area Coffee Roasters\n                    </Typography>\n                    <Button\n                        variant=\"contained\"\n                        size=\"small\"\n                        onClick={() => {\n                            window.open('https://docs.google.com/spreadsheets/d/1u7jiqY1qM0jYWugn1dFiW3plQrvWysJqm8xXhO35zuU/edit?usp=sharing', \"_blank\");\n                        }}>\n                        Add Roaster\n                        </Button>\n                </Toolbar>\n            </AppBar>\n        </div>\n    );\n}\n\nexport default Header;\n","import React, { Component } from 'react';\nimport { Map, Marker, TileLayer, Tooltip, AttributionControl } from \"react-leaflet\";\nimport L from 'leaflet';\nimport \"leaflet/dist/leaflet.css\";\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\nimport \"react-leaflet-markercluster/dist/styles.min.css\";\n\n// Leaflet custom marker\nconst myIcon = new L.Icon({\n    // Coffee bean attribution -- Thanks! https://commons.wikimedia.org/wiki/File:Coffee_bean_symbol.svg\n    iconUrl: require('../bean.svg'),\n    iconSize: new L.Point(25, 25),\n    className: 'leaflet-bean-icon'\n});\n\nclass CoffeeMap extends Component {\n\n    // Initial state\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            dataMaps: []\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <Map\n                    style={{ height: \"89vh\", width: \"100%\" }}\n                    zoom={9}\n                    maxZoom={20}\n                    center={[37.6, -122.5]}\n                    attributionControl={false}>\n                    <TileLayer url=\"https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png\"\n                        attribution=\"&copy; <a href='https://stadiamaps.com/'>Stadia Maps</a>, &copy; and <a href='http://openstreetmap.org'>OpenStreetMap</a> contributors\"\n                    />\n\n                    <AttributionControl position=\"bottomright\" prefix={false} />\n\n                    <MarkerClusterGroup\n                        spiderfyDistanceMultiplier={1}\n                        showCoverageOnHover={false}\n                        maxClusterRadius={35}\n                    >\n                        {this.props.dataMapsProp.filter(x => { return x.Coordinates; }).map((dataItem, k) => {\n                            let { City, mapCoords, Roaster, URL } = dataItem;\n                            return (\n                                <Marker onClick={() => { window.open(URL) }}\n                                    icon={myIcon}\n                                    key={k}\n                                    center={[mapCoords[0], mapCoords[1]]}\n                                    position={[mapCoords[0], mapCoords[1]]}\n                                >\n                                    <Tooltip direction=\"right\" offset={[-8, -2]} opacity={1}>\n                                        <span><a href={URL}>{Roaster}</a></span>\n                                        <span>{City}, CA</span>\n                                    </Tooltip>\n                                </Marker>);\n                        })}\n                    </MarkerClusterGroup>\n                </Map>\n            </div>\n        );\n    }\n}\n\nexport default CoffeeMap;","import React, { Component } from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\nclass CoffeeTable extends Component {\n\n  render() {\n\n    return (\n      <TableContainer component={Paper}>\n        <Table size=\"small\" stickyHeader aria-label=\"Coffee Table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Roaster</TableCell>\n              <TableCell align=\"right\">City</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {this.props.dataMapsProp && this.props.dataMapsProp.map((row) => (\n              <TableRow key={row.Roaster}>\n                <TableCell component=\"th\" scope=\"row\">\n                  <a href={row.URL} target=\"_blank\" rel=\"noopener noreferrer\" >\n                    {row.Roaster}\n                  </a>\n                </TableCell>\n                <TableCell align=\"right\">{row.City}, CA</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    );\n  }\n}\n\nexport default CoffeeTable;","import React, { Component } from 'react';\nimport './App.css';\nimport { BingProvider } from 'leaflet-geosearch';\nimport Header from './components/header';\nimport CoffeeMap from './components/map.js';\nimport CoffeeTable from './components/table';\n\n// Material-UI\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\n\nconst { GoogleSpreadsheet } = require('google-spreadsheet');\n\n// Google Sheets Document ID -- PROD\nconst doc = new GoogleSpreadsheet('1u7jiqY1qM0jYWugn1dFiW3plQrvWysJqm8xXhO35zuU');\n\n// Google Sheets Document ID -- DEV\n// const doc = new GoogleSpreadsheet('1jQI6PstbEArW_3xDnGgPJR6_37r_KjLoa765bOgMBhk');\n\n// Provider for leaflet-geosearch plugin\nconst provider = new BingProvider({\n  params: {\n    key: process.env.REACT_APP_BING_MAPS_API_KEY\n  },\n});\n\nclass App extends Component {\n\n  // Initial state\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dataMaps: []\n    }\n  }\n\n  componentDidMount() {\n    // Google Sheets API\n    // Based on https://github.com/theoephraim/node-google-spreadsheet\n\n    var self = this;\n\n    (async function main() {\n      // Use service account creds\n      await doc.useServiceAccountAuth({\n        client_email: process.env.REACT_APP_GOOGLE_SERVICE_ACCOUNT_EMAIL,\n        private_key: process.env.REACT_APP_GOOGLE_PRIVATE_KEY,\n      });\n\n      await doc.loadInfo(); // Loads document properties and worksheets\n\n      const sheet = doc.sheetsByIndex[0];\n      const rows = await sheet.getRows();\n\n      rows.forEach((x) => { if (x.Coordinates) { x.mapCoords = JSON.parse(x.Coordinates); } });\n\n      self.setState({ dataMaps: rows });\n\n      var needsUpdates = rows.filter((x) => { return !x.Coordinates; });\n\n      if (needsUpdates && needsUpdates.length > 0) {\n        for (let index in needsUpdates) {\n          let city = needsUpdates[index].City;\n\n          try {\n            let providerResult = await provider.search({ query: city + ', CA, United States' });\n            let latlon = [providerResult[0].y, providerResult[0].x];\n            needsUpdates[index].Coordinates = JSON.stringify(latlon); // Convert obj to string\n            needsUpdates[index].mapCoords = latlon;\n            await needsUpdates[index].save(); // Save to remote Google Sheet\n          }\n          catch (e) {\n            console.log(e);\n          }\n        }\n\n        self.setState({ dataMaps: rows });\n      }\n\n    })();\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Header />\n        <Grid container spacing={2}>\n          <Grid item xs={12} sm={8}>\n            <Paper>\n              <CoffeeMap dataMapsProp={this.state.dataMaps} />\n            </Paper>\n          </Grid>\n          <Grid item xs={12} sm={4}>\n            <Paper>\n              <CoffeeTable dataMapsProp={this.state.dataMaps} />\n            </Paper>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}